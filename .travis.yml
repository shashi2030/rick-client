language: generic
sudo: required

services:
  - docker

before_install:
  - docker build -t shashi2030/rickandmontry -f Dockerfile.dev .

script:
  - docker run -e CI=true shashi2030/rickandmontry

before_deploy:
  - docker run -e shashi2030/rickandmontry npm run build

deploy:
  provider: pages
  skip_cleanup: true
  github_token: $github_token
  local_dir: build
  on:
    branch: master